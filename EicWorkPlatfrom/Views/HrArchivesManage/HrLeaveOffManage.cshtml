<div class="panel panel-primary" ng-controller="arLeaveOffCtrl">
    <div class="panel-heading">
        <h6 class="panel-title">离职人员管理</h6>
    </div>
    <div class="panel-body">
        <div class="row" cg-busy="{promise:promise}">
            <div class="col-md-8">
                <form class="form-inline" novalidate>
                    <div class="input-group">
                        <div class="input-group-addon">
                            <label>作业工号</label>
                        </div>
                        <input class="form-control" type="text" ng-model="vmManager.workerId" ng-keypress="vmManager.getWorker($event)" placeholder="输入工号按下回车键查询" />
                        <div class="input-group-addon">
                            <i class="fa fa-search"></i>
                        </div>
                    </div>
                </form>
                <div class="h-split"></div>
                <div class="table-responsive">
                    <table class="table table-striped table-bordered">
                        <colgroup>
                            <col width="100"/>
                        </colgroup>
                        <colgroup>
                            <col width="80" />
                        </colgroup>
                        <colgroup>
                            <col width="130" />
                        </colgroup>
                        <colgroup>
                            <col width="80" />
                        </colgroup>
                        <colgroup>
                            <col width="130" />
                        </colgroup>
                        <tbody>
                            <tr>
                                <td rowspan="3" cg-busy="{promise:searchPromise}">
                                    <img src="{{vmManager.workerInfo.PersonImageUrl}}" />
                                </td>
                                <td>身份证号：</td><td colspan="3" class="text-info">{{vmManager.workerInfo.IdentityID}}</td>
                            </tr>
                            <tr>
                                <td>工号：</td>
                                <td class="text-info">{{ vmManager.workerInfo.WorkerId}}</td>
                                <td>姓名：</td>
                                <td class="text-info">{{vmManager.workerInfo.Name}}</td>
                            </tr>
                            <tr>
                                <td>部门：</td>
                                <td class="text-info">{{vmManager.workerInfo.Department}}</td>
                                <td>岗位：</td>
                                <td class="text-info">{{vmManager.workerInfo.Post}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="h-split"></div>

                <form role="form" name="formLeaveOff" novalidate class="form-horizontal" onkeypress="if (event.keyCode === 13) return false;">
                    <div class="form-group">
                        <label for="leaveDate" class="col-md-2 control-label">离职日期</label>
                        <div class="col-md-4">
                            <input name="leaveDate" type="date" class="form-control" ng-model="vm.LeaveDate" required />
                            <div class="error-messages" ng-messages="formLeaveOff.leaveDate.$error" ng-show="operate.showValidation">
                                <small ng-message="required">离职日期不能为空</small>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="leaveReason" class="col-md-2 control-label">离职原因</label>
                        <div class="col-md-4">
                            <button type="button" class="btn btn-primary" ng-model="vm.LeaveReason"
                                    data-html="1" data-multiple="0" data-animation="am-flip-x" data-placeholder="选择离职原因"
                                    data-bs-options="leaveType.name as leaveType.text for leaveType in vmManager.leaveReasonTypes" data-bs-select>
                                   <span class="caret"></span>
                            </button>
                            <input name="leaveReason" class="form-control" ng-model="vm.LeaveReason" ng-show="false" required />
                            <div class="error-messages" ng-messages="formLeaveOff.leaveReason.$error" ng-show="operate.showValidation">
                                <small ng-message="required">离职原因不能为空</small>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="memo" class="col-md-2 control-label">备注</label>
                        <div class="col-md-4">
                            <textarea name="memo" rows="2" class="form-control" ng-model="vm.Memo"/>
                        </div>
                    </div>
                    <hr />
                    <div class="alert alert-info">
                        <div class="row">
                            <div class="col-md-2">
                            </div>
                            <div class="col-md-10">
                                <button class="btn btn-primary" ng-click="operate.save(formLeaveOff.$valid)"><i class="fa fa-save"></i>保存</button>
                                <button class="btn btn-default" ng-click="operate.refresh()"><i class="fa fa-undo"></i>取消</button>
                                <span yl-operatemsg-board></span>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
        

    </div>
</div>