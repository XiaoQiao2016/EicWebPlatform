<div class="panel panel-primary" ng-controller="rmaInputDescriptionCtrl">
    <div class="panel-heading">
        <h6 class="panel-title">RMA描述登记</h6>
    </div>
    <div class="panel-body">
        <div class="row">
            <div class="col-md-4">
                <form class="form-inline">
                    <div class="form-group">
                        <label>RMA单号</label>
                        <input type="text" placeholder="按RMA单号查询" ng-model="vm.RmaId" />
                        <button class="btn btn-xs btn-primary" ng-click="vmManager.getRmaFormDatas()" type="button">查询</button>
                    </div>
                </form>
            </div>
            <div class="col-md-8">
                <span class="pull-right">
                    客户简称<label class="label label-default">{{ramvm.CustomerShortName}}</label>
                </span>
                <span class="pull-right">
                    客户编号<label class="label label-success">{{ramvm.CustomerId}}</label>
                </span>
                <span class="pull-right">
                    RMA单号<label class="label label-info">{{ramvm.RmaId}}</label>
                </span>
            </div>
        </div>
        <div class="h-split"></div>
        <div class="row">
            <div class="col-md-9 well">
                <form role="form" name="formRmaBussesDescription" novalidate class="form-horizontal" onkeypress="if (event.keyCode === 13) return false;">

                    <div class="form-group">
                        <label for="returnHandleOrder" class="col-md-2 control-label">ERP单号</label>
                        <div class="col-md-10">
                            <input name="returnHandleOrder" id="returnHandleOrder" class="form-control" ng-keypress="vmManager.getReturnOrderInfo($event)" ng-model="vm.ReturnHandleOrder" required />
                            <div class="error-messages" ng-messages="formRmaBussesDescription.returnHandleOrder.$error" ng-show="operate.showValidation">
                                <small ng-message="required">ERP单号不能为空</small>
                            </div>
                            <table class="table table-condensed">
                                <tbody>
                                    <tr>
                                        <td>品号</td>
                                        <td class="info">{{vm.ProdcutId}}</td>
                                        <td>品名</td>
                                        <td class="info">{{vm.ProductName}}</td>
                                        <td>规格</td>
                                        <td class="info">{{vm.ProductSpec}}</td>
                                    </tr>
                                    <tr>
                                        <td>客户编号</td>
                                        <td class="info">{{vm.ProdcutId}}</td>
                                        <td>客户名称</td>
                                        <td class="info">{{vm.ProductName}}</td>
                                        <td>数量</td>
                                        <td class="info">{{vm.ProductCount}}</td>
                                    </tr>
                                </tbody>
                            </table>
                            <dialog ng-if="vmManager.windowOpen" for="returnHandleOrder" align="bottom left" data-close="vmManager.showWindow()">
                                <div dialog-title>ERP退货单信息</div>
                                <div dialog-content>
                                    <table class="table table-striped">
                                        <thead>
                                            <tr>
                                                <th>品号</th>
                                                <th>品名</th>
                                                <th>规格</th>
                                                <th>数量</th>
                                                <th>客户编号</th>
                                                <th>客户名称</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr ng-repeat="item in vmManager.returnOrderDatas track by $index">
                                                <td>{{item.ProdcutId}}</td>
                                                <td>{{item.ProductName}}</td>
                                                <td>{{item.ProductSpec}}</td>
                                                <td>{{item.ProductCount}}</td>
                                                <td>{{item.CustomerId}}</td>
                                                <td>{{item.CustomerName}}</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </dialog>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="salesOrder" class="col-md-2 control-label">订单号</label>
                        <div class="col-md-4">
                            <input name="salesOrder" class="form-control" ng-model="vm.SalesOrder" required />
                            <div class="error-messages" ng-messages="formRmaBussesDescription.salesOrder.$error" ng-show="operate.showValidation">
                                <small ng-message="required">订单号不能为空</small>
                            </div>
                        </div>
                        <label for="productsShipDate" class="col-md-2 control-label">原出货日期</label>
                        <div class="col-md-4">
                            <input name="productsShipDate" type="date" class="form-control" ng-model="vm.ProductsShipDate" required />
                            <div class="error-messages" ng-messages="formRmaBussesDescription.productsShipDate.$error" ng-show="operate.showValidation">
                                <small ng-message="required">原出货日期不能为空</small>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="badReason" class="col-md-2 control-label">不良原因</label>
                        <div class="col-md-4">
                            <textarea name="badReason" class="form-control" ng-model="vm.BadReason" required rows="3" />
                            <div class="error-messages" ng-messages="formRmaBussesDescription.badReason.$error" ng-show="operate.showValidation">
                                <small ng-message="required">不良原因不能为空</small>
                            </div>
                        </div>
                        <label for="customerHandleIdea" class="col-md-2 control-label">客户处理意见</label>
                        <div class="col-md-4">
                            <textarea rows="3" name="customerHandleIdea" class="form-control" ng-model="vm.CustomerHandleIdea" required />
                            <div class="error-messages" ng-messages="formRmaBussesDescription.customerHandleIdea.$error" ng-show="operate.showValidation">
                                <small ng-message="required">客户处理意见不能为空</small>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="feePaymentWay" class="col-md-2 control-label">付费方工式</label>
                        <div class="col-md-4">
                            <input name="feePaymentWay" class="form-control" ng-model="vm.FeePaymentWay" required />
                            <div class="error-messages" ng-messages="formRmaBussesDescription.feePaymentWay.$error" ng-show="operate.showValidation">
                                <small ng-message="required">付费方工式不能为空</small>
                            </div>
                        </div>
                    </div>
                    <hr />
                    <div class="alert alert-info">
                        <div class="row">
                            <div class="col-md-2">
                            </div>
                            <div class="col-md-10">
                                <button class="btn btn-primary" ng-click="operate.saveAll(formRmaBussesDescription.$valid)"><i class="fa fa-save"></i>保存</button>
                                <button class="btn btn-default" ng-click="operate.refresh()"><i class="fa fa-undo"></i>取消</button>
                                <span yl-operatemsg-board></span>
                            </div>
                        </div>
                    </div>
                </form>

            </div>
            <div class="col-md-3">
                <div class="bs-callout bs-callout-info" cg-busy="{promise:searchPromise}">
                    <div class="table-responsive">
                        <table class="table table-striped table-hover">
                            <thead>
                                <tr class="info">
                                    <th>ERP单号</th>
                                    <th>原出货日期</th>
                                    <th>操作(<i class="fa fa-pencil-square-o"></i>)</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="item in vmManager.editDatas track by $index">
                                    <td>{{item.ReturnHandleOrder}}</td>
                                    <td>{{item.ProductsShipDate}}</td>
                                    <td>
                                        <button class="btn btn-xs btn-primary" ng-click="operate.editItem(item)" title="修改">
                                            <i class="fa fa-pencil-square-o"></i>
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

            </div>
        </div>
    </div>
    <div class="panel-footer">

    </div>
</div>