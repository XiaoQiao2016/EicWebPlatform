<div class="panel panel-primary" ng-controller="hwMaterialBomInfoCtrl">
    <div class="panel-heading">
        <h6 class="panel-title"><i class="fa fa-pencil-square-o"></i>关键物料BOM信息管理</h6>
    </div>
    <div class="panel-body" cg-busy="{promise:searchPromise}">
        <div class="bs-callout bs-callout-default">
            <div class="row">
                <div class="col-md-6" cg-busy="{promise:opPromise}">
                    <button class="btn btn-success pull-left" ng-click="operate.save()">
                        <i class="fa fa-save"></i>
                        保存数据
                    </button>
                </div>
                <div class="col-md-6">
                    <form role="form" name="formQuery" novalidate class="form-inline pull-right">
                        <div class="form-group">
                            <label for="vendorItemCode" class="control-label">物料编号(父阶)</label>
                            <input name="vendorItemCode" class="form-control" ng-model="vmManager.materialId"
                                   ng-keypress="vmManager.getMaterialBomInfo($event)" placeholder="BOM 物料编号(父阶编码)" required />
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <div class="bs-callout bs-callout-success">
            <div class="row">
                <div class="col-md-6">
                    <span style="font-size:large">物料BOM信息</span>
                </div>
                <div class="col-md-6">
                    <button class="btn btn-sm btn-warning pull-right" title="新增物料BOM信息" ng-click="vmManager.addMaterialBomInfo()">
                        <i class="fa fa-plus-circle"></i>
                        添加
                    </button>
                </div>
            </div>
            <div class="h-split"></div>
            <table class="table table-striped">
                <thead>
                    <tr class="success">
                        <th>父阶物料编码</th>
                        <th>子阶物料编码</th>
                        <th>替代组</th>
                        <th>父阶基础用量</th>
                        <th>子阶用量</th>

                        <th>操作(<i class="fa fa-pencil-square-o"></i>)</th>
                    </tr>
                </thead>
                <tbody cy-busy="{promise:searchPromise}">
                    <tr ng-repeat="item in vmManager.dataEntity.keyMaterialList">
                        <td>{{item.vendorItemCode}}</td>
                        <td>{{item.subItemCode}}</td>
                        <td>{{item.substituteGroup}}</td>
                        <td>{{item.baseUsedQuantity}}</td>
                        <td>{{item.standardQuantity}}</td>
                        <td>
                            <span class="btn btn-primary btn-xs" title="编辑" ng-click="vmManager.showEditWindow(item)">
                                <i class="fa fa-pencil-square-o"></i>
                            </span>|
                            <span class="btn btn-warning btn-xs" title="复制" ng-click="vmManager.showCopyWindow(item)">
                                <i class="fa fa-clone"></i>
                            </span>|
                            <span class="btn btn-danger btn-xs" title="删除" ng-click="vmManager.removeMaterial(item)">
                                <i class="fa fa-remove"></i>
                            </span>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>


        <dialog ng-if="editDialog.open" modal data-close="editDialog.close()" style="width:40%">
            <content dialog-title>
                <i class="fa fa-pencil-square">数据编辑窗口</i>
            </content>
            <content dialog-content style="width:100%" class="bs-callout bs-callout-info">
                <form role="form" name="formMaterial" novalidate class="form-horizontal">
                    <div class="form-group">
                        <label for="vendorItemCode" class="col-md-4 control-label">父阶物料编码</label>
                        <div class="col-md-8">
                            <input type="text" name="vendorItemCode" class="form-control" ng-model="materialVM.vendorItemCode" ng-if="materialVM.isAdd" placeholder="父阶物料编码" required />
                            <input type="text" name="vendorItemCode" class="form-control" ng-model="materialVM.vendorItemCode" ng-if="!materialVM.isAdd" readonly placeholder="父阶物料编码" required />
                            <div class="error-messages" ng-messages="formMaterial.vendorItemCode.$error" ng-show="operate.showValidation">
                                <small ng-message="required">父阶物料编码不能为空</small>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="subItemCode" class="col-md-4 control-label">子阶物料编码</label>
                        <div class="col-md-8">
                            <input type="text" name="subItemCode" class="form-control" ng-model="materialVM.subItemCode" placeholder="子阶物料编码" required />
                            <div class="error-messages" ng-messages="formMaterial.subItemCode.$error" ng-show="operate.showValidation">
                                <small ng-message="required">子阶物料编码不能为空</small>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="substituteGroup" class="col-md-4 control-label">替代组</label>
                        <div class="col-md-8">
                            <input type="text" name="substituteGroup" class="form-control" ng-model="materialVM.substituteGroup" placeholder="替代组" required />
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="baseUsedQuantity" class="col-md-4 control-label">父阶基础用量</label>
                        <div class="col-md-8">
                            <input type="number" name="baseUsedQuantity" class="form-control" ng-model="materialVM.baseUsedQuantity" placeholder="父阶基础用量" required />
                            <div class="error-messages" ng-messages="formMaterial.baseUsedQuantity.$error" ng-show="operate.showValidation">
                                <small ng-message="required">父阶基础用量不能为空</small>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="standardQuantity" class="col-md-4 control-label">子阶用量</label>
                        <div class="col-md-8">
                            <input type="number" name="standardQuantity" class="form-control" ng-model="materialVM.standardQuantity" placeholder="子阶用量" required />
                            <div class="error-messages" ng-messages="formMaterial.standardQuantity.$error" ng-show="operate.showValidation">
                                <small ng-message="required">子阶用量不能为空</small>
                            </div>
                        </div>
                    </div>
                </form>
            </content>
            <content dialog-buttons>
                <button autofocus ng-click="vmManager.confirmEditData()">确定</button>
                <button ng-click="vmManager.cancelEditData()">取消</button>
            </content>
        </dialog>
    </div>
    <div class="panel-footer">

    </div>
</div>