<div class="panel panel-primary" ng-controller="workTaskManageCtrl">
    <div bs-tabs bs-active-pane="vmManager.activeTab" cg-busy="{promise:promise}">
        <div bs-pane data-title="录入任务" data-name="initTab">
            <div class="row">
                <div class="col-md-8">
                    <div class="bs-callout bs-callout-info">
                        <form role="form" name="formWorkTaskManager" novalidate class="form-horizontal" onkeypress="if (event.keyCode === 13) return false;">
                            <div class="form-group">
                                <label for="systemName" class="col-md-2 control-label">系统名称</label>
                                <div class="col-md-4">
                                    <input name="systemName" placeholder="必填" class="form-control" ng-model="vm.SystemName" ng-show="false" style="background-color:red" required />
                                    <div class="error-messages" ng-messages="formWorkTaskManager.systemName.$error" ng-show="operate.showValidation">
                                        <small ng-message="required">系统名称不能为空</small>
                                    </div>

                                    <button type="button" class="btn btn-default" ng-model="vm.SystemName" ng-change="vmManager.selectSystemName()"
                                            data-html="1" data-ng-multiple="0" data-animation="am-flip-x" data-placeholder="选择系统名称"
                                            data-bs-options="item.id as item.text for item in vmManager.systemNames" data-bs-select>
                                        <span class="caret"></span>

                                    </button>
                                </div>
                                <label for="moduleName" class="col-md-2 control-label">模块类别</label>
                                <div class="col-md-4">
                                    <input name="moduleName" class="form-control" placeholder="必填" ng-model="vm.ModuleName" ng-show="false" required />
                                    <div class="error-messages" ng-messages="formWorkTaskManager.moduleName.$error" ng-show="operate.showValidation">
                                        <small ng-message="required">模块类别不能为空</small>
                                    </div>
                                    <button type="button" class="btn btn-default" ng-model="vm.ModuleName"
                                            data-html="1" data-ng-multiple="0" data-animation="am-flip-x" data-placeholder="选择模块类别"
                                            data-bs-options="module.id as module.text for module in vmManager.showmoduleNameList" data-bs-select>
                                        <span class="caret"></span>
                                    </button>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="department" class="col-md-2 control-label">部门</label>
                                <div class="col-md-4">
                                    <div class="input-group">
                                        <input name="department" placeholder="必填" class="form-control" ng-model="vm.Department" required />
                                        <div class="error-messages" ng-messages="formWorkTaskManager.department.$error" ng-show="operate.showValidation">
                                            <small ng-message="required">部门不能为空</small>
                                        </div>
                                        <div class="input-group-btn">
                                            <button class="btn btn-primary" style="margin-bottom:6px;" id="departmentPopover"
                                                    data-title="选择部门名称"
                                                    data-template-url="@Url.Action("TreeSelectTpl", "CommonTpl")"
                                                    data-animation="am-flip-x" data-auto-close="1"
                                                    data-keyboard="false"
                                                    data-bs-popover>
                                                <i class="fa fa-sitemap"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <label for="checkPerson" class="col-md-2 control-label">审核人</label>
                                <div class="col-md-4">
                                    <input name="checkPerson" class="form-control" ng-model="vm.CheckPerson" />
                                    @*<div class="error-messages" ng-messages="formWorkTaskManager.checkPerson.$error" ng-show="operate.showValidation">
                                        <small ng-message="required">审核人不能为空</small>
                                         </div>*@
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="workDescription" class="col-md-2 control-label">功能描述</label>
                                <div class="col-md-10">
                                    <textarea name="workDescription" class="form-control" ng-model="vm.WorkDescription" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="workItem" class="col-md-2 control-label">具体功能</label>
                                <div class="col-md-4">
                                    <input name="workItem" placeholder="必填" class="form-control" ng-model="vm.WorkItem" required />
                                    <div class="error-messages" ng-messages="formWorkTaskManager.workItem.$error" ng-show="operate.showValidation">
                                        <small ng-message="required">具体功能不能为空</small>
                                    </div>
                                </div>
                                <label for="difficultyCoefficient" class="col-md-2 control-label">难度系数</label>
                                <div class="col-md-4">
                                    <input type="number" max="5" min="1" name="difficultyCoefficient" placeholder="必填" class="form-control" ng-model="vm.DifficultyCoefficient" required />
                                    <div class="error-messages" ng-messages="formWorkTaskManager.difficultyCoefficient.$error" ng-show="operate.showValidation">
                                        <small ng-message="required">难度系数不能为空</small>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="workPriority" class="col-md-2 control-label">优先级</label>
                                <div class="col-md-4">
                                    <input type="number" max="5" min="1" name="workPriority" placeholder="必填" class="form-control" ng-model="vm.WorkPriority" />
                                    <div class="error-messages" ng-messages="formWorkTaskManager.workPriority.$error" ng-show="operate.showValidation">
                                        <small ng-message="required">优先级不能为空</small>
                                    </div>
                                </div>
                                <label for="startDate" class="col-md-2 control-label">开始时间</label>
                                <div class="col-md-4">
                                    <input name="startDate" type="date" placeholder="必填" class="form-control" ng-model="vm.StartDate" format-date />
                                    <div class="error-messages" ng-messages="formWorkTaskManager.startDate.$error" ng-show="operate.showValidation">
                                        <small ng-message="required">开始时间不能为空</small>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="endDate" class="col-md-2 control-label">结束时间</label>
                                <div class="col-md-4">
                                    <input name="endDate" type="date" placeholder="必填" class="form-control" ng-model="vm.EndDate" format-date />
                                    <div class="error-messages" ng-messages="formWorkTaskManager.endDate.$error" ng-show="operate.showValidation">
                                        <small ng-message="required">结束时间不能为空</small>
                                    </div>
                                </div>
                                <label for="progressStatus" class="col-md-2 control-label">进度状态</label>
                                <div class="col-md-4">
                                    <input name="progressStatus" placeholder="必填" class="form-control" ng-model="vm.ProgressStatus" ng-show="false" />
                                    <div class="error-messages" ng-messages="formWorkTaskManager.progressStatus.$error" ng-show="operate.showValidation">
                                        <small ng-message="required">进度状态不能为空</small>
                                    </div>
                                    <button type="button" class="btn btn-default" ng-model="vm.ProgressStatus" data-placeholder="选择状态"
                                            data-html="1" data-multiple="0" data-ng-multiple="am-flip-x"
                                            data-bs-options="item.id as item.text for item in vmManager.progressstatus" data-bs-select>
                                        <span class="caret"></span>
                                    </button>

                                </div>
                            </div>
                            <div class="form-group">
                                <label for="progressDescription" class="col-md-2 control-label">进度描述</label>
                                <div class="col-md-4">
                                    <input name="progressDescription" class="form-control" ng-model="vm.ProgressDescription" />
                                    @*<div class="error-messages" ng-messages="formWorkTaskManager.progressDescription.$error" ng-show="operate.showValidation">
                                            <small ng-message="required">进度状态不能为空</small>
                                        </div>*@
                                </div>
                                <label for="orderPerson" class="col-md-2 control-label">执行人</label>
                                <div class="col-md-4">
                                    <div class="input-group">
                                        <input name="orderPerson" class="form-control" ng-model="vm.OrderPerson" ng-show="false" />
                                        <button type="button" class="btn btn-default" ng-model="vm.OrderPerson"
                                                data-html="1" data-multiple="0" data-placeholder="选择执行人"
                                                data-bs-options="person.name as person.text for person in vmManager.orderpersons" data-bs-select></button>

                                    </div>

                                    @*<div class="error-messages" ng-messages="formWorkTaskManager.orderPerson.$error" ng-show="operate.showValidation">
                                           <small ng-message="required">执行人不能为空</small>
                                        </div>*@

                                </div>
                            </div>
                            <div class="form-group">

                                <label for="remark" class="col-md-2 control-label">备注</label>
                                <div class="col-md-10">
                                    <textarea name="remark" class="form-control" ng-model="vm.Remark" />
                                </div>
                            </div>
                            <hr />
                            <div class="alert alert-info">
                                <div class="row">
                                    <div class="col-md-2">
                                    </div>
                                    <div class="col-md-10">
                                        <button class="btn btn-primary " ng-click="operate.saveAll(formWorkTaskManager.$valid)"><i class="fa fa-save"></i>保存</button>
                                        <button class="btn btn-default" ng-click="operate.refresh()"><i class="fa fa-undo"></i>取消</button>
                                        <span yl-operatemsg-board></span>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <div bs-pane data-title="系统查询" data-name="editTab">

            <div class="well">
                <div bs-tabs>
                    @*系统名称*@
                    <div bs-pane data-title="系统名称">
                        <div class="well">
                            <form class="form-inline" role="form">
                                <label class="control-label">系统名称:</label>
                                <div class="form-group ">
                                    <div class="input-group">
                                        <div class="input-group-btn">

                                            <button type="button" class="btn btn-default" ng-model="query.systemName" ng-change="vmManager.querySystemName()"
                                                    data-html="1" data-ng-multiple="0" data-animation="am-flip-x" data-placeholder="选择系统名称"
                                                    data-bs-options="item.id as item.text for item in vmManager.systemNames" data-bs-select>
                                                <span class="caret"></span>
                                            </button>
                                        </div>
                                    </div>
                                    <button role="button" class="btn btn-primary" ng-click="vmManager.getTaskRecords(1)"><i class="fa fa-search"></i>查询</button>
                                </div>
                            </form>
                        </div>
                    </div>
                    @*模块名称*@
                    <div bs-pane data-title="模块类别">
                        <div class="well">
                            <form class="form-inline" role="form">
                                <label class="control-label">模块名称:</label>
                                <div class="form-group ">
                                    <div class="input-group">

                                        @*<input type="text" class="form-control" placeholder="按模块名称查询" ng-model="query.moduleName" />
                                            <div class="input-group-btn">*@
                                        <input type="text" class="form-control" placeholder="按模块名称查询" ng-model="query.moduleName" ng-show="false" />
                                        <button type="button" class="btn btn-default" ng-model="query.moduleName"
                                                data-html="1" data-ng-multiple="0" data-animation="am-flip-x" data-placeholder="选择模块类别"
                                                data-bs-options="module.id as module.text for module in vmManager.querymoduleNameList" data-bs-select>
                                            <span class="caret"></span>
                                        </button>
                                    </div>

                                </div>
                                <button role="button" class="btn btn-primary" ng-click="vmManager.getTaskRecords(2)"><i class="fa fa-search"></i>查询</button>

                            </form>
                        </div>
                    </div>
                    @*进度状态*@
                    <div bs-pane data-tile="进度状态">
                        <div class="well">
                            <form class="form-inline" role="form">
                                <label class="control-label">进度状态:</label>
                                <div class="form-group ">
                                    <div class="input-group">

                                        @*<input type="text" class="form-control" placeholder="按模块名称查询" ng-model="query.moduleName" />
                                            <div class="input-group-btn">*@
                                        <input type="text" class="form-control" placeholder="按进度状态查询" ng-model="query.progressStatus" ng-show="false" />
                                        <button type="button" class="btn btn-default" ng-model="query.progressStatus"
                                                data-html="1" data-ng-multiple="0" data-animation="am-flip-x" data-placeholder="选择进度状态"
                                                data-bs-options="module.id as module.text for module in vmManager.progressstatus" data-bs-select>
                                            <span class="caret"></span>
                                        </button>
                                    </div>

                                </div>
                                <button role="button" class="btn btn-primary" ng-click="vmManager.getTaskRecords(3)"><i class="fa fa-search"></i>查询</button>

                            </form>
                        </div>


                    </div>

                </div>
            </div>


            <div class="well" cg-busy="{promise:searchPromise}">
                <div class="h-split"></div>
                <div class="table-responsive">
                    <table class="table table-striped table-hover table-bordered" style="table-layout:fixed;">
                        <colgroup>
                            <col width="50" />
                            <col width="50" />
                            <col width="100" />
                            <col width="100" />
                            <col width="100" />
                            <col width="100" />
                            <col width="100" />
                            <col width="100" />
                            <col width="100" />
                            <col width="100" />
                            <col width="100" />
                            <col width="100" />
                            <col width="100" />
                            <col width="100" />
                            <col width="100" />
                            <col width="80" />
                        </colgroup>
                        <thead>
                            <tr class="info">
                                <th>项次</th>
                                <th>部门</th>
                                <th>系统名称</th>
                                <th>模块类别</th>
                                <th>具体功能</th>
                                <th>功能描述</th>
                                <th>难度系数</th>
                                <th>优先级别</th>
                                <th>开始日期</th>
                                <th>完成日期</th>
                                <th>进度状态</th>
                                <th>进度描述</th>
                                <th>执行人</th>
                                <th>审核人</th>
                                <th>备注</th>
                                <th>操作(<i class="fa fa-pencil-square-o"></i>)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="item in vmManager.searchDataset ">
                                <td ng-bind="$index"></td>
                                <td ng-bind="item.Department"></td>
                                <td ng-bind="item.SystemName"></td>
                                <td ng-bind="item.ModuleName"></td>
                                <td ng-bind="item.WorkItem"></td>
                                <td ng-bind="item.WorkDescription"></td>
                                <td ng-bind="item.DifficultyCoefficient"></td>
                                <td ng-bind="item.WorkPriority"></td>
                                <td ng-bind="item.StartDate"></td>
                                <td ng-bind="item.EndDate"></td>
                                <td ng-bind="item.ProgressStatus"></td>
                                <td ng-bind="item.ProgressDescription"></td>
                                <td ng-bind="item.OrderPerson"></td>
                                <td ng-bind="item.CheckPerson"></td>
                                <td ng-bind="item.Remark"></td>
                                <td>
                                    <button class="btn btn-xs btn-primary" ng-click="operate.editItem(item)" title="修改"><i class="fa fa-edit"></i>修改</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <div ng-if="vmManager.datasource.length>0"
                         yl-pagination
                         data-dataset="vmManager.searchDataset"
                         data-datasource="vmManager.datasource">
                    </div>
                </div>
            </div>

        </div>
    </div>

    <div class="panel-footer">

    </div>
</div>





