<div class="row" ng-controller="workOverHoursManageCtrl">   
     <div class="col-md-12">
        <div class="panel panel-primary">
            <div class="panel-heading">
                <h6 class="panel-title"><i class="fa fa-hand-peace-o">加班管理</i></h6>
            </div>
            <div class="panel-body">
                <div bs-tabs bs-active-pane="vmManager.activeTab"cg-busy="promise:searchPromise">
                    <div bs-pane data-title="加班单操作" data-name="initTab">
                       <div class="col-md-12">
                           <div class="bs-callout bs-callout-info">
                               <div class="row">
                                   <div class="col-md-6">
                                       <form for="form" class="form-inline">
                                           <div class="form-group">
                                               <label for="workDate">日期:</label>
                                               <input type="date" ng-model="query.workDate" class="form-control" placeholder="请选日期" ng-keydown="vmManager.getWorkOverHoursByDatas(1)" format-date />
                                               <button type="button" title="载入模板" class="btn btn-primary" ng-click="vmManager.getWorkOverHoursByDatas(1)">
                                                   <i class="fa fa-download"></i>载入模板
                                               </button>
                                           </div>
                                       </form>
                                   </div>
                                   <div class="col-md-4">
                                       <button class="btn btn-sm btn-primary" title="新增行" ng-click="vmManager.createNewRow()"><i class="fa fa-pencil"></i>新增行</button>
                                       <button class="btn btn-sm btn-success" title="保存" ng-click="operate.save()"><i class="fa fa-save"></i>保存</button>
                                   </div>
                               </div>
                               <div class="h-split"></div>
                               <div class="table-responsive">
                                   <div class="well" cg-busy="{promise:searchPromise}" style="padding:10px;overflow-y:scroll;min-height:280px;max-height:680px;">
                                       <table class="table table-striped table-hover" style="table-layout:fixed;">
                                           <colgroup>
                                               <col width="50" />
                                               <col width="80" />
                                               <col width="70" />
                                               <col width="100" />
                                               <col width="60" />
                                               <col width="60" />
                                               <col width="60" />
                                               <col width="60" />
                                               <col width="60" />
                                           </colgroup>
                                           <thead>
                                               <tr class="info">
                                                   <th class="text-center danger"><i class="fa fa-flag"></i>操作</th>
                                                   <th>加班类型</th>
                                                   <th>部门</th>
                                                   <th>日期</th>
                                                   <th>班别</th>
                                                   <th>工号</th>
                                                   <th>姓名</th>
                                                   <th>加班时数</th>
                                                   <th>备注</th>
                                               </tr>
                                           </thead>
                                           <tbody>
                                               <tr ng-repeat="item in vmManager.dataSource track by $index">
                                                   @*工具按钮*@
                                                   <td class="text-center">
                                                       <button type="button" class="btn btn-xs btn-primary" ng-show="item.editting"
                                                               data-animation="am-flip-x" data-placement="right"
                                                               bs-dropdown aria-haspopup="true" aria-expanded="false">
                                                           <span class="fa fa-pencil-square"></span>
                                                       </button>
                                                       <div class="dropdown-menu" role="menu">
                                                           <ul class="nav nav-pills" role="tablist">
                                                               <li role="presentation">
                                                                   <a href="#" ng-click="vmManager.editOver(item)" title="结束编辑"><i class="fa fa-check-square"></i>结束</a>
                                                               </li>
                                                               <li role="presentation">
                                                                   <a href="#" ng-click="vmManager.removeRow(item)" title="删除此行"><i class="fa fa-remove"></i>删除</a>
                                                               </li>
                                                           </ul>
                                                       </div>

                                                       <button type="button" class="btn btn-xs btn-primary" ng-hide="item.editting"
                                                               data-animation="am-flip-x" data-placement="right"
                                                               bs-dropdown aria-haspopup="true" aria-expanded="false">
                                                           <span class="fa fa-indent"></span>
                                                       </button>
                                                       <div class="dropdown-menu" role="menu">
                                                           <ul class="nav nav-pills" role="tablist">
                                                               <li role="presentation">
                                                                   <a href="#" ng-click="vmManager.editWorkerId(item)" title="编辑信息"><i class="fa fa-pencil"></i>编辑</a>
                                                               </li>
                                                               <li role="presentation">
                                                                   <a href="#" ng-click="vmManager.insertRow(item)" title="插入行"><i class="fa fa-pencil"></i>插入</a>
                                                               </li>
                                                               <li role="presentation">
                                                                   <a href="#" ng-click="vmManager.copyAndPaste(item)" title="复制行"><i class="fa fa-clipboard"></i>复制</a>
                                                               </li>

                                                               <li role="presentation">
                                                                   <a href="#" ng-click="vmManager.removeRow(item)" title="删除此行"><i class="fa fa-remove"></i>删除</a>
                                                               </li>
                                                               <li role="presentation">
                                                                   <a href="#" ng-click="vmManager.caneleditWorkerId(item)" title="取消"><i class="fa fa-undo"></i>取消</a>
                                                               </li>
                                                           </ul>
                                                       </div>
                                                   </td>

                                                   <td title="双击可修改" ng-dblclick="vmManager.editOverType(item)">
                                                   <span ng-hide="item.isEdittingOverType">{{item.WorkoverType}}</span>
                                                       <button type="button" class="btn btn-xs btn-primary" ng-model="vm.WorkoverType" data-html="1" data-placeholder="加班类型"
                                                               ng-show="item.isEdittingOverType" ng-change="vmManager.selectOverType()"
                                                               data-multiple="0" data-animation="am-flip-x" bs-options="ct.id as ct.text for ct in vmManager.overTypes" bs-select>
                                                           平时加班 <span class="caret"></span>
                                                       </button>
                                                   </td>
                                                   <td>{{item.DepartmentText}}</td>
                                                   <td>{{item.WorkDate}}</td>
                                                   <td title="双击可修改" ng-dblclick="vmManager.editClassType(item)">
                                                   <span ng-hide="item.isEdittingClassType">{{item.WorkClassType}}</span>
                                                       <button type="button"class="btn btn-xs btn-primary"ng-model="vm.WorkClassType"data-html="1" data-placeholder="班别"
                                                               ng-show="item.isEdittingClassType"ng-change="vmManager.selectClassType()"
                                                               data-multiple="0"data-animation="am-flip-x"bs-options="am.id as am.text for am in vmManager.classTypes" bs-select>
                                                           晚班<span class="caret"></span>
                                                       </button>
                                                   </td>
                                                  <td  ng-dblclick="editWorkerId(item)">
                                                      <div ng-if="!item.isEdittingWorkerId">
                                                          <span >{{item.WorkerId}}</span>
                                                      </div>
                                                      <div ng-if="item.isEdittingWorkerId">
                                                          <input type="text"  ng-model="item.WorkerId" ng-keydown="vmManager.hello()"/>
                                                      </div>
                                                    
                                                                                                                                                                 
                                                  </td>
                                                   <td>{{item.WorkerName}}</td>
                                                   <td>{{item.WorkOverHours}}</td>
                                                   <td>{{item.Remark}}</td>
                                               </tr>
                                           </tbody>
                                       </table>
                                   </div>
                               </div>
                           </div>
                        </div>
                    </div>
                    <div bs-pane data-title="加班单汇总"data-name="editTab">
                        <h1>加班单汇总</h1>
                    </div>
                </div>
  
            </div>
        </div>  
     </div>
   
</div>